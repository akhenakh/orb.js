Orb.SGP4=Orb.SGP4||function(e){var t=function(e,t){Orb.Constant.RAD;var o=function(e,t){var o=t.epoch_year,a=t.epoch,r=o-1;return(Date.UTC(e.year,e.month-1,e.day,e.hours,e.minutes,e.seconds)-(Date.UTC(r,11,31,0,0,0)+24*a*60*60*1e3))/6e4}(e,t.orbital_elements),a=t.xmo,r=t.xmdot,n=t.omegao,i=t.omgdot,s=t.xnodeo,c=t.xnodot,m=t.xnodcf,u=t.bstar,h=t.t2cof,b=t.omgcof,d=t.isimp,l=t.xmcof,_=t.eta,M=t.delmo,g=t.c1,p=t.c4,x=t.c5,f=t.d2,y=t.d3,v=t.d4,N=t.sinmo,k=t.t3cof,w=t.t4cof,O=t.t5cof,q=t.aodp,z=t.eo,D=t.xnodp,P=t.xke,T=t.xlcof,S=t.aycof,C=t.x3thm1,I=t.x1mth2,E=t.xincl,G=t.cosio,L=t.sinio,A=t.e6a,R=t.ck2,U=t.x7thm1,j=t.xkmper,B=(t.epoch_year,t.epoch,a+r*o),F=n+i*o,H=F,J=B,K=o*o,Q=s+c*o+m*K,V=1-g*o,W=u*p*o,X=h*K;if(1!=d)var J=B+(ne=b*o+l*(Math.pow(1+_*Math.cos(B),3)-M)),H=F-ne,Y=K*o,Z=o*Y,V=V-f*K-y*Y-v*Z,W=W+u*x*(Math.sin(J)-N),X=X+k*Y+Z*(w+o*O);for(var $=q*V*V,ee=z-W,te=J+H+Q+D*X,oe=Math.sqrt(1-ee*ee),ae=P/Math.pow($,1.5),re=ee*Math.cos(H),ne=1/($*oe*oe),ie=ne*S,se=te+ne*T*re,ce=ee*Math.sin(H)+ie,me=(se-Q)%(2*Math.PI),ue=me,he=1;he<=10;he++){var be=Math.sin(ue),de=Math.cos(ue),le=ce*de,_e=re*de,Me=ce*be,ge=(me-le+(we=re*be)-ue)/(1-_e-Me)+ue;if(Math.abs(ge-ue)<=A)break;ue=ge}var pe=we-le,xe=$*(ne=1-(re*re+ce*ce)),fe=$*(1-(_e+Me)),ye=1/fe,ve=P*Math.sqrt($)*pe*ye,Ne=P*Math.sqrt(xe)*ye,ue=$*ye,ke=Math.sqrt(ne),we=1/(1+ke),Oe=ue*(de-re+ce*pe*we),qe=ue*(be-ce-re*pe*we),ze=Math.atan2(qe,Oe);ze<0&&(ze+=2*Math.PI);var De=2*qe*Oe,Pe=2*Oe*Oe-1,Te=fe*(1-1.5*(ue=(ye=R*(ne=1/xe))*ne)*ke*C)+.5*ye*I*Pe,Se=ze-.25*ue*U*De,Ce=Q+1.5*ue*G*De,Ie=E+1.5*ue*G*L*Pe,Ee=ve-ae*ye*I*De,Ge=Ne+ae*ye*(I*Pe+1.5*C),Le=Math.sin(Se),Ae=Math.cos(Se),Re=Math.sin(Ie),Ue=Math.cos(Ie),je=Math.sin(Ce),Be=Math.cos(Ce),Fe=-je*Ue,He=Be*Ue,Je=Fe*Le+Be*Ae,Ke=He*Le+je*Ae,Qe=Re*Le;return{x:Te*Je*j,y:Te*Ke*j,z:Te*Qe*j,xdot:(Ee*Je+Ge*(Fe*Ae-Be*Le))*j/60,ydot:(Ee*Ke+Ge*(He*Ae-je*Le))*j/60,zdot:(Ee*Qe+Ge*(Re*Ae))*j/60}},o=Orb.DecodeTLE(e),a=function(e){var t=Math.PI/180,o=541308e-9,a=e.epoch,r=e.epoch_year,n=e.bstar,i=e.inclination*t,s=e.right_ascension*t,c=1e-7*e.eccentricity,m=e.argument_of_perigee*t,u=e.mean_anomaly*t,h=2*e.mean_motion*Math.PI/1440,b=Math.pow(.0743669161/h,.66666667),d=Math.cos(i),l=d*d,_=3*l-1,M=1-c*c,g=Math.sqrt(M),p=1.5*o*_/(b*b*g*M),x=b*(1-p*(1/3+p*(1+134/81*p))),f=1.5*o*_/(x*x*g*M),y=h/(1+f),v=x/(1-f),N=1440/Number(e.mean_motion),k=0;v*(1-c)/1<220/6378.135+1&&(k=1);var w=1.01222928,O=1.88027916e-9,q=6378.135*(v*(1-c)-1),z=6378.135*(v*(1+c)-1);q<156&&(w=q-78,q<=98?w=20:(O=Math.pow(1*(120-w)/6378.135,4),w=w/6378.135+1));var D=1/(v*v*M*M),P=1/(v-w),T=v*c*P,S=T*T,C=c*T,I=Math.abs(1-S),E=O*Math.pow(P,4),G=E/Math.pow(I,3.5),L=n*(G*y*(v*(1+1.5*S+C*(4+S))+.75*o*P/I*_*(8+3*S*(8+S)))),A=Math.sin(i),R=253881e-11/o*Math.pow(1,3),U=E*P*R*y*1*A/c,j=1-l,B=2*y*G*v*M*(T*(2+.5*S)+c*(.5+2*S)-2*o*P/(v*I)*(-3*_*(1-2*C+S*(1.5-.5*C))+.75*j*(2*S-C*(1+S))*Math.cos(2*m))),F=2*G*v*M*(1+2.75*(S+C)+C*S),H=l*l,J=3*o*D*y,K=J*o*D,Q=1.25*6.2098875e-7*D*D*y,V=y+.5*J*g*_+.0625*K*g*(13-78*l+137*H),W=-.5*J*(1-5*l)+.0625*K*(7-114*l+395*H)+Q*(3-36*l+49*H),X=-J*d,Y=X+(.5*K*(4-19*l)+2*Q*(3-7*l))*d,Z=n*U*Math.cos(m),$=-.66666667*E*n*1/C,ee=3.5*M*X*L,te=1.5*L,oe=.125*R*A*(3+5*d)/(1+d),ae=.25*R*A,re=Math.pow(1+T*Math.cos(u),3),ne=Math.sin(u);if(1!=k)var ie=L*L,se=4*v*P*ie,ce=se*P*L/3,me=(17*v+w)*ce,ue=.5*ce*v*P*(221*v+31*w)*L,he=se+2*ie,be=.25*(3*me+L*(12*se+10*ie)),de=.2*(3*ue+12*L*me+6*se*se+15*ie*(2*se+ie));return{orbital_elements:e,apogee:z,perigee:q,orbital_period:N,epoch_year:r,epoch:a,xmo:u,xmdot:V,omegao:m,omgdot:W,xnodeo:s,xnodot:Y,xnodcf:ee,bstar:n,t2cof:te,omgcof:Z,isimp:k,xmcof:$,eta:T,delmo:re,c1:L,c4:B,c5:F,d2:se,d3:me,d4:ue,sinmo:ne,t3cof:he,t4cof:be,t5cof:de,aodp:v,eo:c,xnodp:y,xke:.0743669161,xlcof:oe,aycof:ae,x3thm1:_,x1mth2:j,xincl:i,cosio:d,sinio:A,e6a:1e-6,ck2:o,x7thm1:7*l-1,xkmper:6378.135}}(o);return{orbital_elements:o,orbital_period:a.orbital_period,apogee:a.apogee,perigee:a.perigee,xyz:function(e){var o=new Orb.Time(e),r=t(o,a);return{x:r.x,y:r.y,z:r.z,xdot:r.xdot,ydot:r.ydot,zdot:r.zdot,date:e,coordinate_keywords:"equational rectangular",unit_keywords:"km"}},latlng:function(e){var o=new Orb.Time(e),r=function(e,t){var e=e,o=t.x,a=t.y,r=t.z,n=t.xdot,i=t.ydot,s=t.zdot,c=Orb.Constant.RAD,m=15*e.gmst(),u=.00335277945,h=6378.135,b=Math.sqrt(o*o+a*a),d=Math.atan2(a,o)/c-m;d>360&&(d%=360),d<0&&(d=d%360+360),d>180&&(d-=360);var l=Math.atan2(r,b),_=u*(2-u),M=0;do{M=l;var g=Math.sin(M),p=1/Math.sqrt(1-_*g*g);l=Math.atan2(r+h*p*_*Math.sin(M),b)}while(Math.abs(l-M)>1e-4);return{longitude:d,latitude:l/c,altitude:b/Math.cos(l)-h*p,velocity:Math.sqrt(n*n+i*i+s*s)}}(o,t(o,a));return{latitude:r.latitude,longitude:r.longitude,altitude:r.altitude,date:e,coordinate_keywords:"geographic spherical",unit_keywords:"degree km"}}}},Orb.Satellite=Orb.Satellite||Orb.SGP4,Orb.DecodeTLE=Orb.DecodeTLE||function(e){var t=e.name,o=e.first_line,a=e.second_line,r=Number(o.slice(18,20));if(r<57)n=r+2e3;else var n=r+1900;var i=1e-5*Number(o.substring(53,59)),s=Number("1e"+Number(o.substring(59,61))),c=i*s;return{name:t,line_number_1:Number(o.slice(0,0)),catalog_no_1:Number(o.slice(2,6)),security_classification:Number(o.slice(7,7)),international_identification:Number(o.slice(9,17)),epoch_year:n,epoch:Number(o.substring(20,32)),first_derivative_mean_motion:Number(o.substring(33,43)),second_derivative_mean_motion:Number(o.substring(44,52)),bstar_mantissa:i,bstar_exponent:s,bstar:c,ephemeris_type:Number(o.substring(62,63)),element_number:Number(o.substring(64,68)),check_sum_1:Number(o.substring(69,69)),line_number_2:Number(o.slice(0,0)),catalog_no_2:Number(a.slice(2,7)),inclination:Number(a.substring(8,16)),right_ascension:Number(a.substring(17,25)),eccentricity:Number(a.substring(26,33)),argument_of_perigee:Number(a.substring(34,42)),mean_anomaly:Number(a.substring(43,51)),mean_motion:Number(a.substring(52,63)),rev_number_at_epoch:Number(a.substring(64,68)),check_sum_2:Number(o.substring(68,69))}};